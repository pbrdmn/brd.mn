<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Displaying Relative Time for a Static Site / brd.mn</title>
  <meta name="description" content="Calculating relative dates in JavaScript to display on statically generated sites, including those built with Eleventy - like this one">
  <link rel="canonical" href="https://brd.mn/articles/timeago-js/">
  <link rel="alternate" type="application/rss+xml" title="RSS"
      href="https://brd.mn/rss.xml"><link rel="icon" href="https://brd.mn/images/logo@1x.jpg">
<meta name="theme-color" content="#fff">
<meta name="theme-color" content="#888488" media="(prefers-color-scheme: dark)">

<meta property="og:title" content="Displaying Relative Time for a Static Site">
<meta property="og:description" content="Calculating relative dates in JavaScript to display on statically generated sites, including those built with Eleventy - like this one">
<meta property="og:type" content="article">
<meta property="og:url" content="https://brd.mn/articles/timeago-js/">
<meta property="og:site_name" content="brd.mn">
<meta property="article:author" content="Philip Boardman">
<meta property="article:published_time" content="Thu Mar 09 2023 11:00:00 GMT+1100 (Australian Eastern Daylight Time)">
<meta property="og:image" content="https://brd.mn/articles/timeago-js/age-barros-rBPOfVqROzY-unsplash.jpg">
  
  <style>:root{--foreground:#564b57;--background:#fff;--background2:#f3f2f4;--code-background:#3b3b3b;--link:#015fb6;--visited:#6c0b77}@media screen and (prefers-color-scheme:dark){:root{--foreground:#888488;--background:#050305;--background2:#160d16;--link:#5282c9;--visited:#8d71a3;--code-background:#030203}img{opacity:.7}}html{font-family:sans-serif;line-height:1.3;color:var(--foreground);background:var(--background)}@media (min-width:600px){html{font-size:1.125rem}}@media (min-width:900px){html{font-size:1.25rem}}body{margin:0 0 3rem;padding:0}main{padding:0 1rem;max-width:36rem;margin:1rem auto}a{color:var(--link)}a:visited{color:var(--visited)}a.logo{display:flex;align-items:center;flex-direction:row;text-decoration:none;color:var(--foreground)}a.logo img{margin-right:.5rem}h1,h2{font-weight:400}article.snippet{display:flex;margin:1rem 0 2rem}.snippet .thumb{margin-left:1rem;flex:1}.snippet .summary{flex:3}.snippet .summary h2{font-size:inherit;font-weight:inherit;margin:0}.snippet .summary p{margin:.5rem 0}footer{font-size:.8rem}footer>p{margin:.5rem 0}@media screen and (max-width:599px){article>img,header>img{margin:0 -1rem;width:calc(100% + 2rem);max-width:calc(100% + 2rem);border-radius:0}.snippet{flex-direction:column-reverse}.snippet .thumb{margin:0 0 .5rem}.snippet .thumb img{width:100%}}blockquote,pre{background:var(--background2);padding:1rem;margin:1rem -1rem;overflow:hidden}blockquote>:first-child{margin-top:0}blockquote>:last-child{margin-bottom:0}code{background:var(--background2)}@media print,(prefers-contrast:more){blockquote,pre{background:var(--background);outline:2px solid var(--background2)}}pre{white-space:pre-wrap;word-break:break-all}img{max-width:100%;height:auto;border-radius:.2rem}hr{height:.1rem;width:90%;background:var(--background2);border:0;margin:2rem auto}nav ul{margin:1rem 0;padding:0;display:flex;flex-wrap:wrap}nav li{list-style:none}nav li a{margin-right:1rem}@media (min-width:600px){blockquote,pre{border-radius:.5rem}pre[class*=language-]{border-radius:.3em}}@media print{:root{--foreground:#000;--background2:#fff}html{font-size:14px}main{max-width:100%}}</style>
      <link rel="stylesheet" type="text/css" href="/css/code.css">
  <script src="/js/timeAgo.js" defer></script>
</head>
  <body>
    <main>
      <h1><a class="logo" href="/" title="brd.mn"><img
      src="/images/logo@2x.webp"
      srcset="/images/logo@1x.webp 1x, /images/logo@2x.webp 2x, /images/logo@3x.webp 3x"
      width="64"
      height="64" 
      alt="Philip Boardman"
    > Philip Boardman</a></h1>

      <article>
  <header>
    <h1>Displaying Relative Time for a Static Site</h1>
      <img src="age-barros-rBPOfVqROzY-unsplash.jpg" alt="Watch face with complications showing the time" title="Watch face with complications showing the time" width="800" height="450">
  </header>

  <footer>
    Published <time datetime="2023-03-09" title="Published on 2023-03-09">on 2023-03-09</time>
    in 
      <a href="/tags/javascript/">#javascript</a>
    
      <a href="/tags/time/">#time</a>
    
      <a href="/tags/eleventy/">#eleventy</a>
    
      <a href="/tags/code/">#code</a>
    
  </footer>

  <hr>

  <p>Recently I was looking to make the article dates a little simpler to see how recently they had been written. Rather than looking at timestamp or date, I wanted to see now many days, months, or years ago an article was. This looked like relatively simple problem to tackle and I could have imported an <code>npm</code> package and been done with it, but where is the fun in that?</p>
<p>Instead I began writing a function which calculated the difference between two javascript <code>Date()</code> objects, which would then by transformed into some discrete time periods with the power of <strong>math</strong>, then display the largest useful time period in the format of <code>{X} {periods} ago</code>.</p>
<h2>Calculating the Relative Time</h2>
<p>Calculating the time difference between the two instances of the <code>Date()</code> class by subtraction gives a difference in milliseconds (<code>ms</code> below). This is converted to <code>days</code> by dividing by the number of milliseconds per day, then transformed to values for <code>months</code> and <code>years</code> by dividing <code>days</code> by <code>30</code> and <code>365</code> respectively.</p>
<pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">var</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> ms <span class="token operator">=</span> now <span class="token operator">-</span> dateObj<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> days <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>ms <span class="token operator">/</span> <span class="token number">86400000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> months <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>days <span class="token operator">/</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> years <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>months <span class="token operator">/</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Once we have calculated each of the time periods we are interested in, we can <code>switch</code> between which time period to display and return a formatted string showing a human-readable time difference between the two dates given.</p>
<pre class="language-javascript"><code class="language-javascript">    <span class="token keyword">if</span> <span class="token punctuation">(</span>years <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>years<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>months <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>months<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> months ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>days<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> days ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre>
<p>With this in place, we can now calculate how old a date is in days, months, and years. In our <code>switch</code> statement, we are checking that <code>years</code> and <code>months</code> are greater than <code>1</code> which means we do not need to consider pluralisation for these labels. For <code>days</code>, we could apply a pluralisation if the <code>days</code> has a value greater than <code>1</code>.</p>
<p>This was all put assembled into a function as a filter in the <code>.eleventy.js</code> configuration file.</p>
<pre class="language-javascript"><code class="language-javascript">  cfg<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"timeAgo"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">dateObj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> days <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span>now <span class="token operator">-</span> dateObj<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">86400000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> months <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>days <span class="token operator">/</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> years <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>months <span class="token operator">/</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>years <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>years<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>months <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>months<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> months ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>days<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> days ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Implementing this function within the <code>.eleventy.js</code> file as a filter meant that within an template, we could format the article's date by applying this filter.</p>
<pre class="language-text"><code class="language-text">  Published {{ page.date | timeAgo }}</code></pre>
<p>And during the eleventy build step, the page will output</p>
<pre class="language-text"><code class="language-text">  Published 1 days ago</code></pre>
<hr>
<h2>Hitting a Roadblock</h2>
<p>This is where I ran into my first roadblock.</p>
<p>Eleventy has been <em>serving</em> my needs perfectly well for several months, since <a href="/articles/eleventy/">rebuilding my site with Eleventy</a> last year, but my code was only run during the build step, which means any changes are only updated to the site when it is deployed.</p>
<blockquote>
<p>With a statically generated site, a post that shows a publication time of <code>1 days ago</code> would continue to display this until the next article was written causing the site to be rebuilt and republished.</p>
</blockquote>
<p>This did not seem to solve my problem as it is often months between writing new articles. There are workarounds, like using a cron task to trigger a rebuild every day, but that would be wasteful. Instead of using this function within the template, I needed to move the script into the browser to be run on page load.</p>
<hr>
<h2>Making Relative Dates Dynamic</h2>
<p>We will need to refactor our function and move it to a new file to publish at <code>/js/timeAgo.js</code> and add a reference to this file from the <code>_header</code> template to include it on each page of the site once it's published.</p>
<pre class="language-html"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/timeAgo.js<span class="token punctuation">"</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<p>This also needed to be published in the <code>.eleventy.js</code> config, here I'm publishing the whole <code>/js/</code> directory, even though there's only one file required at the moment.</p>
<pre class="language-javascript"><code class="language-javascript">  cfg<span class="token punctuation">.</span><span class="token function">addPassthroughCopy</span><span class="token punctuation">(</span><span class="token string">"src/js/*.*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Within the <code>timeAgo.js</code> file we have three things to accomplish.</p>
<ol>
<li>Running our script when the page loads</li>
<li>Find all of the dates on the page</li>
<li>Replacing the date with the relative time</li>
</ol>
<p>Covering each of these items in <em>reverse</em> order.</p>
<h3>3. Replacing the date with the relative time</h3>
<p>We can lift most of our logic from the previous <code>timeAgo</code> filter function into our new file, while here, we can also take an optional second date to make testing easier.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">timeAgo</span><span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> now</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>now<span class="token punctuation">)</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> ms <span class="token operator">=</span> now <span class="token operator">-</span> time<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> days <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>ms <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">86400</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> months <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>days <span class="token operator">/</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> years <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>days <span class="token operator">/</span> <span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>years <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>years<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>months <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>months<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> months ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>days<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> days ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>This function will take a <code>Date()</code> object as the first argument (and an optional second argument to override the <code>new Date()</code> for testing) and return a formatted relative time string.</p>
<h3>2. Find all of the dates on the page</h3>
<p>There is a piece of setup required here. In our template file, we want to generate some HTML code that gives a clean way to find where in the page to render the relative times, but we also need the dates available as input for function.</p>
<p>We can use <code>&lt;time&gt;</code> HTML tags as our placeholder and we can use the <code>datetime</code> attribute to hold the source dates. Inside the tag, we can display the static article date, which will be overwritten with the string returned from the <code>timeAgo</code> function.</p>
<pre class="language-mustache"><code class="language-mustache"><span class="token punctuation">&lt;</span><span class="token variable">time</span> <span class="token variable">datetime</span><span class="token punctuation">=</span><span class="token string">"{{ article.data.date | postDate }}"</span><span class="token punctuation">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">article</span><span class="token punctuation">.</span><span class="token variable">data</span><span class="token punctuation">.</span><span class="token variable">date</span> <span class="token punctuation">|</span> <span class="token variable">postDate</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">&lt;</span><span class="token punctuation">/</span><span class="token variable">time</span><span class="token punctuation">></span></code></pre>
<p>With these dates now well structured, the code to find and replace each on the page is covered in this <code>relativeDates</code> function. We first query for all <code>time</code> elements which have the <code>datetime</code> attribute, then for each of these we parse the date and replace the contents of the element with the formatted <code>timeAgo</code> string.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">relativeDates</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> els <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"time[datetime]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  els<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"datetime"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token function">timeAgo</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h3>1. Running our script when the page loads</h3>
<p>With these other changes in place we need to trigger our <code>relativeDates()</code> function to run when the pages is loaded, which can be achieved with:</p>
<pre class="language-javascript"><code class="language-javascript">document<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token function">relativeDates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<hr>
<h2>Bringing it all together</h2>
<p>With our change to the template including our script</p>
<pre class="language-html"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/timeAgo.js<span class="token punctuation">"</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<p>And marking up our templates with a structured <code>time</code> tag.</p>
<pre class="language-mustache"><code class="language-mustache"><span class="token punctuation">&lt;</span><span class="token variable">time</span> <span class="token variable">datetime</span><span class="token punctuation">=</span><span class="token string">"{{ article.data.date | postDate }}"</span><span class="token punctuation">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">article</span><span class="token punctuation">.</span><span class="token variable">data</span><span class="token punctuation">.</span><span class="token variable">date</span> <span class="token punctuation">|</span> <span class="token variable">postDate</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">&lt;</span><span class="token punctuation">/</span><span class="token variable">time</span><span class="token punctuation">></span></code></pre>
<p>And the full <code>timeAgo.js</code> file now contains the three requirements listed above</p>
<pre class="language-javascript"><code class="language-javascript">document<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token function">relativeDates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">relativeDates</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> els <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"time[datetime]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  els<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"datetime"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token function">timeAgo</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">timeAgo</span><span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> now</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>time<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>now<span class="token punctuation">)</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> ms <span class="token operator">=</span> now <span class="token operator">-</span> time<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> days <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>ms <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">86400</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> months <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>days <span class="token operator">/</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> years <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>days <span class="token operator">/</span> <span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>years <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>years<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>months <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>months<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> months ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>days<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> days ago</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2>Bonus &quot;Today&quot;</h2>
<p>As an added bonus, we can add a quick check to our <code>timeAgo</code> function to check if the article date is &quot;Today&quot; and return this</p>
<pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">if</span> <span class="token punctuation">(</span><br>    now<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> time<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br>    now<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> time<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br>    now<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> time<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token string">"Today"</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span></code></pre>

</article>
    </main>
  </body>
</html>